

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Contact Closures &mdash; UTA Docs 0.0.0.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="UTA Docs 0.0.0.1 documentation" href="../../../index.html"/>
        <link rel="up" title="Alarms" href="../index.html"/>
        <link rel="next" title="Teleboss Connection" href="../teleboss_connection/index.html"/>
        <link rel="prev" title="Alarms" href="../index.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> UTA Docs
          

          
          </a>

          
            
            
              <div class="version">
                0.0.0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Admin Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../system.html">System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../general/index.html">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../traffic.html">Traffic</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Alarms</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="">Contact Closures</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../teleboss_connection/index.html">Teleboss Connection</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">UTA Docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">Admin Guide</a> &raquo;</li>
      
          <li><a href="../index.html">Alarms</a> &raquo;</li>
      
    <li>Contact Closures</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/admin_guide/alarms/contact_closures/index.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contact-closures">
<h1>Contact Closures<a class="headerlink" href="#contact-closures" title="Permalink to this headline">¶</a></h1>
<p>Authors:  <a class="reference external" href="https://github.com/brettburbidge">Brett Burbidge</a></p>
<p>This example will show to setup UTA to watch for contact closures through a Teleboss 850.</p>
<div class="section" id="definitions">
<h2>Definitions<a class="headerlink" href="#definitions" title="Permalink to this headline">¶</a></h2>
<p>An <strong>Alarm Element</strong> is a managed device that sits on the network. In this example our <strong>Alarm Element</strong> is a Teleboss 850.  The Teleboss is the termination point for contact closures.  It monitors the state of the contact closures. When the state changes the teleboss sends a message to UTA. UTA recieves this message and translates it to the correct alarm. These messages are sent from the Teleboss to UTA via the Simple Network Management Protocol (SNMP) using SNMP Traps.</p>
<p>The Teleboss sends specific information in each Trap to signal the contact closure state change.  These different Traps need to be defined in UTA.  They are called <strong>Monitors</strong>.  Each <strong>Alarm Element</strong> can have many <strong>Monitors</strong></p>
<p>This example goes through how to setup an <strong>Alarm Element</strong> with its different <strong>Monitors</strong> to send the appriate alarms when the state of a contact closure changes.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>Before we start creating <strong>Alarm Elements</strong> and <strong>Monitors</strong> in the software we need to map out the different contact closures and where they sit in the Teleboss. Below is a screenshot of an Excel spreadsheet that contains the an example configuration.  We will go through each of these below.</p>
<blockquote>
<div><img alt="../../../_images/teleboss_module.jpg" src="../../../_images/teleboss_module.jpg" />
</div></blockquote>
<p>We will fill out the Trap Numbers later.</p>
<p>Click here to download an <a class="reference download internal" href="../../../_downloads/contact_closure_example.xlsx"><code class="xref download docutils literal"><span class="pre">example</span> <span class="pre">configuration</span> <span class="pre">file</span></code></a></p>
<p>Each contact closure module in the teleboss can hold 8 contact closures.  When the state of the contact closure changes (from open to close, or close to open) a message with the corresponding ID (number) is sent out as an SNMP trap. We read this trap ID in UTA and create the correct alarm.  If the state of the contact closure is changed back to the default state, meaning the alarm has been corrected, we clear the alarm in UTA.  So we need two IDs for each contact closure.  An ID that sets the alarm and the ID that clear it.  You can see those in the image above.</p>
<ul class="simple">
<li>Module: is the name of the module in the Teleboss.</li>
<li>Alarm Position: is the physical location of the wires plugged into the back of the Teleboss.</li>
<li>Contact Close Name: name of the contact closure.</li>
<li>Trap Numbers: These are the ID&#8217;s passed in the Trap that will create/acknowlege specific alarms in UTA.</li>
</ul>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">Take a minute now and make your own spreadsheet with your site information. We will gather the <strong>Monitor</strong> Trap Numbers later.</p>
</div>
<div class="section" id="ensure-uta-teleboss-connections">
<h3>Ensure UTA &amp; Teleboss Connections<a class="headerlink" href="#ensure-uta-teleboss-connections" title="Permalink to this headline">¶</a></h3>
<p>Follow the steps in <a class="reference internal" href="../teleboss_connection/index.html#id1"><span>Teleboss Connection</span></a>  before you continue.</p>
</div>
</div>
<div class="section" id="alarm-element-creation">
<h2>Alarm Element Creation<a class="headerlink" href="#alarm-element-creation" title="Permalink to this headline">¶</a></h2>
<p>Follow the steps below to create the Teleboss as an <strong>Alarm Element</strong> in UTA:</p>
<ol class="arabic simple">
<li>Open UTA &amp; Login</li>
<li>Click the Admin dropdown</li>
<li>Select Alarm Elements</li>
<li>In the main window click the New Element button</li>
</ol>
<p>Example:</p>
<blockquote>
<div><img alt="../../../_images/new_alarm_element.gif" src="../../../_images/new_alarm_element.gif" />
</div></blockquote>
<p>Enter the Alarm Element information:</p>
<ol class="arabic simple">
<li>Name (the name of the Teleboss)</li>
<li>Ip Address (the ip address of the Teleboss)</li>
<li>Port (leave this blank)</li>
<li>Community Name (leave this blank)</li>
<li>Type (select Teleboss)</li>
<li>Collector Port (leave this blank)</li>
<li>Collection File Path (leave this blank)</li>
<li>SNMP Version (select &#8216;one&#8217;)</li>
<li>Click Save</li>
</ol>
<p>This will send you back to the Alarm Elements screen</p>
<dl class="docutils">
<dt>Finished Example:</dt>
<dd><img alt="../../../_images/uta_alarm_element.jpg" class="first last" src="../../../_images/uta_alarm_element.jpg" />
</dd>
</dl>
</div>
<div class="section" id="element-monitors">
<h2>Element Monitors<a class="headerlink" href="#element-monitors" title="Permalink to this headline">¶</a></h2>
<p><strong>Monitors</strong> are part of the <strong>Alarm Element</strong> that trigger alarms based on the ID recieved from the SNMP Trap.  This section will go through how to setup these in the Teleboss and in UTA.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Make sure your excel spreadsheet is finished with your modules and contact closures defined.</p>
</div>
<p>Before we start looking at UTA <strong>Monitors</strong> lets configure the Teleboss and fill out the rest of your excel sheet.</p>
<ul class="simple">
<li>Open Putty.exe and login to the teleboss</li>
<li>After logging into the Teleboss via SSH type &#8216;setup&#8217; and press Enter.</li>
</ul>
<img alt="../../../_images/putty_login.jpg" src="../../../_images/putty_login.jpg" />
<ul class="simple">
<li>Select option F (Action Defintions)</li>
</ul>
<img alt="../../../_images/putty_f.jpg" src="../../../_images/putty_f.jpg" />
<ul class="simple">
<li>Select option A (Hostname/IP Address 1)</li>
<li>Enter the IP address of the UTA server</li>
<li>Press the Enter button</li>
</ul>
<img alt="../../../_images/putty_a.jpg" src="../../../_images/putty_a.jpg" />
<ul class="simple">
<li>Press the Enter button to go back one more menu</li>
<li>Select option E (Alarm/Event Defintions)</li>
<li>Select option C (EventSensor Device Settings)</li>
</ul>
<img alt="../../../_images/putty_c.jpg" src="../../../_images/putty_c.jpg" />
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don&#8217;t have an C option here it means that the modules have not been installed or the device needs to be rebooted.</p>
</div>
<p>In the device above there are two modules (Windows and Dooors)</p>
<ul class="simple">
<li>Select an option. In this example I am going to click C (Contact Closure 2).  The screen will change to what you see below.  We are looking at the 8 contact closures on the Doors module.</li>
</ul>
<img alt="../../../_images/putty_b.jpg" src="../../../_images/putty_b.jpg" />
<p>Each Teleboss module has 8 possible contact closure connections. In the menu (shown above) you can see all 8 contact closures.  We are going to configure each of these according to the Excel spreadsheet we filled out earlier.</p>
<div class="section" id="name-your-module">
<h3>Name your Module<a class="headerlink" href="#name-your-module" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Select option A (Device Name)</li>
<li>Enter the Module name you want here and then press the Enter key.  I will name mine &#8216;Doors&#8217;.</li>
</ul>
</div>
<div class="section" id="configure-the-module">
<h3>Configure the Module<a class="headerlink" href="#configure-the-module" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Select option B (Contat Closure 1)</li>
</ul>
<p>You should see something similar to this:</p>
<img alt="../../../_images/putty_contact_closure_doors.jpg" src="../../../_images/putty_contact_closure_doors.jpg" />
<p>The following list explains each of the items seen in this screen:</p>
<ol class="upperalpha simple">
<li>Sensor Name: Just a reference to the section name.</li>
<li>Contact Slosure Endabled: this contact closure is triggering when changes occure.</li>
<li>Event State: The default state of the contact closure connected.</li>
<li>Threshold: The amount of time (in seconds) that the contact closure state must be in.  For example if 2, the state must be &#8216;closed&#8217; for 2 seconds for this to trigger a trap.</li>
<li>Event State Actions: What to do when the event state has changed.</li>
<li>Return to Normal Actions: What to do when the event state has been changed back to default state.</li>
<li>Event State Class: We don&#8217;t use this but it can be seen on the Traps captured by UTA.</li>
<li>Return to Normal Class: We don&#8217;t use this either.</li>
<li>Event Trap Number: IMPORTANT: This must be a Unique number for this whole Teleboss. This number tells UTA which alarm to trigger.</li>
<li>Return to Normal Trap Number: IMPORTANT: This must be a Unique number for this whole Teleboss. This number tells UTA which alarm to turn off.</li>
<li>Active Alarm Alias: Just text so you know what the active state is.  &#8216;Front door shut&#8217; in this example is the default state.</li>
<li>Inactive Alarm Alias: Just text so you know what the inactive state is.  &#8216;Front door open&#8217; in this example.</li>
</ol>
</div>
<div class="section" id="complete-your-spreadsheet">
<h3>Complete your Spreadsheet<a class="headerlink" href="#complete-your-spreadsheet" title="Permalink to this headline">¶</a></h3>
<p>In the image below I have entered the individual Event Trap Number and Return to Normal Trap Numbers in the spreadsheet.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Remember that the Event Trap Number and Return to Normal Trap Number be unique for the entire Teleboss.</p>
</div>
<img alt="../../../_images/teleboss_module_def.jpg" src="../../../_images/teleboss_module_def.jpg" />
<p>When completing your spreadsheet make sure to fill in each of the Trap Numbers for both Evnet Trap Number and Return to Normal Trap Number.  I normally just put them one digit apart as seen in the example above.</p>
</div>
<div class="section" id="configure-your-contact-closure">
<h3>Configure your Contact Closure<a class="headerlink" href="#configure-your-contact-closure" title="Permalink to this headline">¶</a></h3>
<p>Now we need to change each of the following contact closure properties to match your spreadsheet.  To do that enter the letter of the property you want to change.  Use the guide below to help.</p>
<ul class="simple">
<li>A: Sensor Name</li>
<li>B: ON</li>
<li>C: OPEN</li>
<li>D: 2</li>
<li>E: Press Enter and type trap(1) then press Enter.  Explanation below.</li>
<li>F: Press Enter and type trap(1) then press Enter.</li>
<li>G: Info</li>
<li>H: Info</li>
<li>I: 1000</li>
<li>J: 1001</li>
<li>K: Enter open status text that makes sense for this sensor</li>
<li>L: Enter closed status text that makes sense for this sensor</li>
</ul>
<p>Your complete screen should look similar to this:</p>
<img alt="../../../_images/putty_closure_complete.jpg" src="../../../_images/putty_closure_complete.jpg" />
</div>
<div class="section" id="configure-the-remaining-teleboss-modules-now">
<h3>Configure the remaining Teleboss Modules Now<a class="headerlink" href="#configure-the-remaining-teleboss-modules-now" title="Permalink to this headline">¶</a></h3>
<p>Go through your Teleboss and set up each module and contact closure to match your spreadsheet.</p>
<p>Your spreadsheet and teleboss should look similar to this:</p>
<img alt="../../../_images/teleboss_module_setup.jpg" src="../../../_images/teleboss_module_setup.jpg" />
</div>
</div>
<div class="section" id="uta-monitor-creation">
<h2>UTA Monitor Creation<a class="headerlink" href="#uta-monitor-creation" title="Permalink to this headline">¶</a></h2>
<p>The UTA Alarm Monitors watch the contact closures you created in the Teleboss.  This section will cover adding the Alarm Monitors in UTA and testing the Alarm Creation.</p>
<ol class="arabic simple">
<li>Open UTA and Login.</li>
<li>Go to Admin&gt;Alarm Elements.</li>
<li>Click the Monitors button on the Alarm Element you created earlier.</li>
<li>Click New Monitor.</li>
</ol>
<p>Example:</p>
<img alt="../../../_images/alarm_monitor_new.gif" src="../../../_images/alarm_monitor_new.gif" />
<p>With the new Alarm Monitor open fill out the information for this monitor.</p>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">For each Contact Closure you configured in the Teleboss we need to create a new Alarm Monitor for each one. Fun!</p>
</div>
<ul class="simple">
<li>Name: the name of the contact closure from your excel spreadsheet.</li>
<li>Alarm Key: the Trap Number you entered into the Teleboss.  The first number in the Trap Numbers column.</li>
<li>Alarm Key Value: leave this blank.</li>
<li>Clear Alarm Key: the Return to Normal Trap Number.  The second number in the Trap Numbers column.</li>
<li>Clear Alarm Key Value: leave this blank.</li>
<li>Message: this is the alarm message that will be displayed when an new alarm is generated from this.  For exampl this could be &#8216;Back door open&#8217;.</li>
<li>Escalation: select the Escalation pattern from the dropdown list.</li>
<li>Press the Save button to save the Alarm Monitor.</li>
</ul>
<p>Example:</p>
<img alt="../../../_images/uta_alarm_monitor.jpg" src="../../../_images/uta_alarm_monitor.jpg" />
<p>Your Alarm Monitor is now ready to create alarms when the Teleboss sends a 1000 Trap message.</p>
</div>
<div class="section" id="testing-contact-closures">
<h2>Testing Contact Closures<a class="headerlink" href="#testing-contact-closures" title="Permalink to this headline">¶</a></h2>
<p>If you have the Teleboss installed and ready to receive contact closures from a real system skip to <a class="reference internal" href="#id1"><span>Check UTA for Alarms</span></a>.</p>
<div class="section" id="create-contact-closure-test">
<h3>Create Contact Closure Test<a class="headerlink" href="#create-contact-closure-test" title="Permalink to this headline">¶</a></h3>
<p>Most of the time we don’t have access to the systems that generate the contact closures during setup.  Follow the instructions below to create your own contact closure tester with the Teleboss.</p>
<p>Strip two wires on both sides and secure one side into the Teleboss module slot 1+ and slot 1-.</p>
<img alt="../../../_images/teleboss_sample_contact_closure_1.jpg" src="../../../_images/teleboss_sample_contact_closure_1.jpg" />
<p>Below is the module installed in the Teleboss.  The default state of the Front Door Alarm is open. This means that the current state is non alarming (pun not intended).</p>
<img alt="../../../_images/teleboss_sample_contact_closure_open.jpg" src="../../../_images/teleboss_sample_contact_closure_open.jpg" />
<p>To create an alarm close the circuit.  Closing the circuit will tell the Teleboss to send an SNMP Trap to the UTA server.</p>
<img alt="../../../_images/teleboss_sample_contact_closure_closed.jpg" src="../../../_images/teleboss_sample_contact_closure_closed.jpg" />
</div>
<div class="section" id="check-uta-for-alarms">
<h3>Check UTA for Alarms<a class="headerlink" href="#check-uta-for-alarms" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple" id="id1">
<li>Open UTA and Login.</li>
<li>Go to Alarms &gt; Active Alarms.</li>
<li>You should see an alarm that looks like this:</li>
</ol>
<img alt="../../../_images/uta_active_alarms.jpg" src="../../../_images/uta_active_alarms.jpg" />
<p>If you don’t see an alarm on the Active Alarms page we need to do some more troubleshooting.</p>
</div>
<div class="section" id="troubleshooting">
<h3>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h3>
<div class="admonition hint">
<p class="first admonition-title">Hint</p>
<p class="last">If you did not see an alarm in Active Alarms go back through each step above and ensure that IP’s, trap numbers are correct.</p>
</div>
</div>
<div class="section" id="check-the-system-log-for-traps">
<h3>Check the System Log for Traps<a class="headerlink" href="#check-the-system-log-for-traps" title="Permalink to this headline">¶</a></h3>
<p>Go to Admin &gt; System Logs and check for traps received.  You should see something like this:</p>
<img alt="../../../_images/uta_system_log.jpg" src="../../../_images/uta_system_log.jpg" />
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">Make sure you touched the wires together for at least 2 seconds to create the alarm.  2 seconds comes from the Threshold setting found on the specific Contact Closure.</p>
</div>
</div>
</div>
<div class="section" id="finished">
<h2>Finished<a class="headerlink" href="#finished" title="Permalink to this headline">¶</a></h2>
<p>This concludes the section on setting up Contact Closures.  Happy alarming.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../teleboss_connection/index.html" class="btn btn-neutral float-right" title="Teleboss Connection" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Alarms" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Brett Burbidge.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>